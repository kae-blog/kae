---
// src/components/PostCardHorizontal.astro (這是您的備份)
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;

const formatDate = (date: Date) => {
  const d = new Date(date);
  return `${d.getFullYear()}/${String(d.getMonth() + 1).padStart(2, '0')}/${String(d.getDate()).padStart(2, '0')}`;
};
---

<article class="bg-[var(--bg-card)] rounded-xl shadow-md flex items-center p-4 hover:shadow-lg transition-all duration-300">
  <div class="w-24 h-24 flex-shrink-0 overflow-hidden border border-[var(--border-color)] mr-4 rounded-lg">
    <img src={post.data.previewImage} alt={post.data.title} class="w-full h-full object-cover" />
  </div>
  
  <div class="flex-1 flex flex-col">
    <div class="mb-2 flex flex-wrap gap-1 justify-end">
      {post.data.category.map(cat => (
        <a href={`/category/${cat}`} class="text-xs font-medium text-white bg-[var(--accent-color)] py-1 px-2 rounded-full hover:bg-[var(--accent-hover)] transition-colors">
          {cat}
        </a>
      ))}
    </div>
    <div class="flex-grow">
      <h3 class="text-base font-bold text-[var(--text-primary)] mb-1 line-clamp-2">
        <a href={`/blog/${post.slug}`} class="hover:text-[var(--accent-color)] transition-colors">
          {post.data.title}
        </a>
      </h3>
      <p class="text-sm text-[var(--text-secondary)] line-clamp-2 mb-2">{post.data.description}</p>
    </div>
    <div class="flex flex-wrap items-center justify-between text-xs text-gray-500 gap-x-2 gap-y-1">
      <div class="flex flex-wrap items-center gap-x-2 gap-y-1">
        <span>{formatDate(post.data.publishDate)}</span>
        {post.data.tags?.slice(0, 1).map(tag => (
          <span class="px-2 py-0.5 rounded-md text-gray-700 text-xs" style="background-color: #e7f0e2;">
            {tag}
          </span>
        ))}
      </div>
      <a href={`/blog/${post.slug}`} class="text-[var(--accent-color)] hover:underline ml-auto">閱讀 &rarr;</a>
    </div>
  </div>
</article>
